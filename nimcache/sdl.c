/* Generated by Nimrod Compiler v0.9.6 */
/*   (c) 2014 Andreas Rumpf */
/* The generated code is subject to the original license. */
/* Compiled for: Windows, amd64, gcc */
/* Command for C compiler:
   gcc.exe -c  -w  -IC:\Nimrod\lib -o c:\users\simon\rationalnes_\nimcache\sdl.o c:\users\simon\rationalnes_\nimcache\sdl.c */
#define NIM_INTBITS 64
#include "nimbase.h"
typedef struct TGenericSeq TGenericSeq;
typedef struct NimStringDesc NimStringDesc;
typedef struct tpixelformat215045 tpixelformat215045;
typedef struct tsurface215055 tsurface215055;
typedef struct trect215027 trect215027;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct tpalette215041 tpalette215041;
typedef struct tcolor215033 tcolor215033;
typedef struct trwops214268 trwops214268;
typedef struct tmem214256 tmem214256;
struct  TGenericSeq  {
NI len;
NI reserved;
};
struct  NimStringDesc  {
  TGenericSeq Sup;
NIM_CHAR data[SEQ_DECL_SIZE];
};
typedef N_CDECL_PTR(NI32, TY219235) (tpixelformat215045* format, NU8 r, NU8 g, NU8 b, NU8 a);
typedef N_CDECL_PTR(NCSTRING, TY218411) (void);
typedef N_CDECL_PTR(void, TY219313) (tsurface215055* surface);
struct  trect215027  {
NI16 X;
NI16 Y;
NU16 W;
NU16 H;
};
struct  tsurface215055  {
NI32 Flags;
tpixelformat215045* Format;
int W;
int H;
NU16 Pitch;
void* Pixels;
int Offset;
void* Hwdata;
trect215027 Cliprect;
NI32 Unused1;
NI32 Locked;
void* Blitmap;
int Formatversion;
int Refcount;
};
typedef N_NIMCALL_PTR(void, TY2689) (void* p, NI op);
typedef N_NIMCALL_PTR(void*, TY2694) (void* p);
struct  TNimType  {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
TY2689 marker;
TY2694 deepcopy;
};
struct  TNimNode  {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct  tpixelformat215045  {
tpalette215041* Palette;
NU8 Bitsperpixel;
NU8 Bytesperpixel;
NU8 Rloss;
NU8 Gloss;
NU8 Bloss;
NU8 Aloss;
NU8 Rshift;
NU8 Gshift;
NU8 Bshift;
NU8 Ashift;
NI32 Rmask;
NI32 Gmask;
NI32 Bmask;
NI32 Amask;
NI32 Colorkey;
NU8 Alpha;
};
struct  tpalette215041  {
NI Ncolors;
tcolor215033* Colors;
};
struct  tcolor215033  {
NU8 R;
NU8 G;
NU8 B;
NU8 Unused;
};
typedef tcolor215033 tcolorarray215037[65001];
typedef N_CDECL_PTR(tsurface215055*, TY219286) (NI32 flags, NI width, NI height, NI depth, NI32 rmask, NI32 gmask, NI32 bmask, NI32 amask);
typedef N_CDECL_PTR(tsurface215055*, TY219150) (NI width, NI height, NI bpp, NU32 flags);
typedef N_CDECL_PTR(NI, TY219350) (tsurface215055* surface, trwops214268* dst, NI freedst);
typedef N_CDECL_PTR(trwops214268*, TY218607) (NCSTRING filename, NCSTRING mode);
typedef N_CDECL_PTR(NI, TY219412) (tsurface215055* src, trect215027* srcrect, tsurface215055* dst, trect215027* dstrect);
typedef N_CDECL_PTR(NI, TY219430) (tsurface215055* dst, trect215027* dstrect, NI32 color);
typedef N_CDECL_PTR(NI, TY218226) (NI32 flags);
typedef N_CDECL_PTR(NI, tseek214260) (trwops214268* context, NI offset, NI whence);
typedef N_CDECL_PTR(NI, tread214262) (trwops214268* context, void* theptr, NI size, NI maxnum);
typedef N_CDECL_PTR(NI, twrite214264) (trwops214268* context, void* theptr, NI size, NI num);
typedef N_CDECL_PTR(NI, tclose214266) (trwops214268* context);
struct  tmem214256  {
NU8* Base;
NU8* Here;
NU8* Stop;
};
struct  trwops214268  {
tseek214260 Seek;
tread214262 Read;
twrite214264 Write;
tclose214266 Closefile;
int Thetype;
tmem214256 Mem;
};
N_NIMCALL(void*, nimLoadLibrary)(NimStringDesc* path);
N_NOINLINE(void, nimLoadLibraryError)(NimStringDesc* path);
N_NIMCALL(void*, nimGetProcAddr)(void* lib, NCSTRING name);
static N_INLINE(void, nimFrame)(TFrame* s);
N_NOINLINE(void, stackoverflow_17801)(void);
static N_INLINE(void, popFrame)(void);
STRING_LITERAL(TMP720, "SDL.dll", 7);
STRING_LITERAL(TMP721, "SDL.dll", 7);
static void* TMP719;
TY219235 Dl_219234;
TY218411 Dl_218410;
TY219313 Dl_219312;
TNimType NTI215055; /* TSurface */
extern TNimType NTI122; /* int32 */
TNimType NTI215045; /* TPixelFormat */
TNimType NTI215041; /* TPalette */
extern TNimType NTI116; /* int */
TNimType NTI215033; /* TColor */
extern TNimType NTI2805; /* Byte */
TNimType NTI215037; /* TColorArray */
TNimType NTI215035; /* PColorArray */
TNimType NTI215039; /* PPalette */
TNimType NTI215043; /* PPixelFormat */
extern TNimType NTI5211; /* cint */
extern TNimType NTI130; /* uint16 */
extern TNimType NTI165; /* pointer */
TNimType NTI215027; /* TRect */
extern TNimType NTI120; /* int16 */
TNimType NTI215051; /* PSurface */
TY219286 Dl_219285;
extern TFrame* frameptr_15242;
TY219150 Dl_219149;
TY219350 Dl_219349;
TY218607 Dl_218606;
TY219412 Dl_219411;
TY219430 Dl_219429;
TY218226 Dl_218225;

static N_INLINE(void, nimFrame)(TFrame* s) {
	NI LOC1;
	LOC1 = 0;
	{
		if (!(frameptr_15242 == NIM_NIL)) goto LA4;
		LOC1 = 0;
	}
	goto LA2;
	LA4: ;
	{
		LOC1 = ((NI) ((NI16)((*frameptr_15242).calldepth + ((NI16) 1))));
	}
	LA2: ;
	(*s).calldepth = ((NI16) (LOC1));
	(*s).prev = frameptr_15242;
	frameptr_15242 = s;
	{
		if (!((*s).calldepth == ((NI16) 2000))) goto LA9;
		stackoverflow_17801();
	}
	LA9: ;
}

static N_INLINE(void, popFrame)(void) {
	frameptr_15242 = (*frameptr_15242).prev;
}

N_NIMCALL(NIM_BOOL, mustlock_219318)(tsurface215055* surface) {
	NIM_BOOL result;
	NIM_BOOL LOC1;
	nimfr("MustLock", "sdl.nim")
	result = 0;
	nimln(2526, "sdl.nim");
	nimln(2526, "sdl.nim");
	LOC1 = 0;
	nimln(2526, "sdl.nim");
	nimln(2526, "sdl.nim");
	LOC1 = !(((*surface).Offset == ((NI32) 0)));
	if (LOC1) goto LA2;
	nimln(2527, "sdl.nim");
	nimln(2527, "sdl.nim");
	nimln(2527, "sdl.nim");
	LOC1 = !(((NI32)((*surface).Flags & ((NI32) 16389)) == ((NI32) 0)));
	LA2: ;
	result = LOC1;
	popFrame();
	return result;
}

N_NIMCALL(NI, savebmp_219357)(tsurface215055* surface, NCSTRING filename) {
	NI result;
	trwops214268* LOC1;
	nimfr("SaveBMP", "sdl.nim")
	result = 0;
	nimln(2515, "sdl.nim");
	nimln(2515, "sdl.nim");
	LOC1 = 0;
	LOC1 = Dl_218606(filename, "wb");
	result = Dl_219349(surface, LOC1, 1);
	popFrame();
	return result;
}

N_NIMCALL(NI, blitsurface_219402)(tsurface215055* src, trect215027* srcrect, tsurface215055* dst, trect215027* dstrect) {
	NI result;
	nimfr("BlitSurface", "sdl.nim")
	result = 0;
	nimln(2518, "sdl.nim");
	result = Dl_219411(src, srcrect, dst, dstrect);
	popFrame();
	return result;
}
N_NOINLINE(void, HEX00_sdlInit)(void) {
	nimfr("sdl", "sdl.nim")
	popFrame();
}

N_NOINLINE(void, HEX00_sdlDatInit)(void) {
static TNimNode* TMP724[14];
static TNimNode* TMP725[17];
static TNimNode* TMP726[2];
static TNimNode* TMP727[4];
static TNimNode* TMP728[4];
static TNimNode TMP710[46];
NTI215055.size = sizeof(tsurface215055);
NTI215055.kind = 18;
NTI215055.base = 0;
NTI215055.flags = 3;
TMP724[0] = &TMP710[1];
TMP710[1].kind = 1;
TMP710[1].offset = offsetof(tsurface215055, Flags);
TMP710[1].typ = (&NTI122);
TMP710[1].name = "flags";
TMP724[1] = &TMP710[2];
NTI215045.size = sizeof(tpixelformat215045);
NTI215045.kind = 18;
NTI215045.base = 0;
NTI215045.flags = 3;
TMP725[0] = &TMP710[4];
NTI215041.size = sizeof(tpalette215041);
NTI215041.kind = 18;
NTI215041.base = 0;
NTI215041.flags = 3;
TMP726[0] = &TMP710[6];
TMP710[6].kind = 1;
TMP710[6].offset = offsetof(tpalette215041, Ncolors);
TMP710[6].typ = (&NTI116);
TMP710[6].name = "ncolors";
TMP726[1] = &TMP710[7];
NTI215033.size = sizeof(tcolor215033);
NTI215033.kind = 18;
NTI215033.base = 0;
NTI215033.flags = 3;
TMP727[0] = &TMP710[9];
TMP710[9].kind = 1;
TMP710[9].offset = offsetof(tcolor215033, R);
TMP710[9].typ = (&NTI2805);
TMP710[9].name = "r";
TMP727[1] = &TMP710[10];
TMP710[10].kind = 1;
TMP710[10].offset = offsetof(tcolor215033, G);
TMP710[10].typ = (&NTI2805);
TMP710[10].name = "g";
TMP727[2] = &TMP710[11];
TMP710[11].kind = 1;
TMP710[11].offset = offsetof(tcolor215033, B);
TMP710[11].typ = (&NTI2805);
TMP710[11].name = "b";
TMP727[3] = &TMP710[12];
TMP710[12].kind = 1;
TMP710[12].offset = offsetof(tcolor215033, Unused);
TMP710[12].typ = (&NTI2805);
TMP710[12].name = "unused";
TMP710[8].len = 4; TMP710[8].kind = 2; TMP710[8].sons = &TMP727[0];
NTI215033.node = &TMP710[8];
NTI215037.size = sizeof(tcolorarray215037);
NTI215037.kind = 16;
NTI215037.base = (&NTI215033);
NTI215037.flags = 3;
NTI215035.size = sizeof(tcolor215033*);
NTI215035.kind = 21;
NTI215035.base = (&NTI215037);
NTI215035.flags = 3;
TMP710[7].kind = 1;
TMP710[7].offset = offsetof(tpalette215041, Colors);
TMP710[7].typ = (&NTI215035);
TMP710[7].name = "colors";
TMP710[5].len = 2; TMP710[5].kind = 2; TMP710[5].sons = &TMP726[0];
NTI215041.node = &TMP710[5];
NTI215039.size = sizeof(tpalette215041*);
NTI215039.kind = 21;
NTI215039.base = (&NTI215041);
NTI215039.flags = 3;
TMP710[4].kind = 1;
TMP710[4].offset = offsetof(tpixelformat215045, Palette);
TMP710[4].typ = (&NTI215039);
TMP710[4].name = "palette";
TMP725[1] = &TMP710[13];
TMP710[13].kind = 1;
TMP710[13].offset = offsetof(tpixelformat215045, Bitsperpixel);
TMP710[13].typ = (&NTI2805);
TMP710[13].name = "BitsPerPixel";
TMP725[2] = &TMP710[14];
TMP710[14].kind = 1;
TMP710[14].offset = offsetof(tpixelformat215045, Bytesperpixel);
TMP710[14].typ = (&NTI2805);
TMP710[14].name = "BytesPerPixel";
TMP725[3] = &TMP710[15];
TMP710[15].kind = 1;
TMP710[15].offset = offsetof(tpixelformat215045, Rloss);
TMP710[15].typ = (&NTI2805);
TMP710[15].name = "Rloss";
TMP725[4] = &TMP710[16];
TMP710[16].kind = 1;
TMP710[16].offset = offsetof(tpixelformat215045, Gloss);
TMP710[16].typ = (&NTI2805);
TMP710[16].name = "Gloss";
TMP725[5] = &TMP710[17];
TMP710[17].kind = 1;
TMP710[17].offset = offsetof(tpixelformat215045, Bloss);
TMP710[17].typ = (&NTI2805);
TMP710[17].name = "Bloss";
TMP725[6] = &TMP710[18];
TMP710[18].kind = 1;
TMP710[18].offset = offsetof(tpixelformat215045, Aloss);
TMP710[18].typ = (&NTI2805);
TMP710[18].name = "Aloss";
TMP725[7] = &TMP710[19];
TMP710[19].kind = 1;
TMP710[19].offset = offsetof(tpixelformat215045, Rshift);
TMP710[19].typ = (&NTI2805);
TMP710[19].name = "Rshift";
TMP725[8] = &TMP710[20];
TMP710[20].kind = 1;
TMP710[20].offset = offsetof(tpixelformat215045, Gshift);
TMP710[20].typ = (&NTI2805);
TMP710[20].name = "Gshift";
TMP725[9] = &TMP710[21];
TMP710[21].kind = 1;
TMP710[21].offset = offsetof(tpixelformat215045, Bshift);
TMP710[21].typ = (&NTI2805);
TMP710[21].name = "Bshift";
TMP725[10] = &TMP710[22];
TMP710[22].kind = 1;
TMP710[22].offset = offsetof(tpixelformat215045, Ashift);
TMP710[22].typ = (&NTI2805);
TMP710[22].name = "Ashift";
TMP725[11] = &TMP710[23];
TMP710[23].kind = 1;
TMP710[23].offset = offsetof(tpixelformat215045, Rmask);
TMP710[23].typ = (&NTI122);
TMP710[23].name = "RMask";
TMP725[12] = &TMP710[24];
TMP710[24].kind = 1;
TMP710[24].offset = offsetof(tpixelformat215045, Gmask);
TMP710[24].typ = (&NTI122);
TMP710[24].name = "GMask";
TMP725[13] = &TMP710[25];
TMP710[25].kind = 1;
TMP710[25].offset = offsetof(tpixelformat215045, Bmask);
TMP710[25].typ = (&NTI122);
TMP710[25].name = "BMask";
TMP725[14] = &TMP710[26];
TMP710[26].kind = 1;
TMP710[26].offset = offsetof(tpixelformat215045, Amask);
TMP710[26].typ = (&NTI122);
TMP710[26].name = "AMask";
TMP725[15] = &TMP710[27];
TMP710[27].kind = 1;
TMP710[27].offset = offsetof(tpixelformat215045, Colorkey);
TMP710[27].typ = (&NTI122);
TMP710[27].name = "colorkey";
TMP725[16] = &TMP710[28];
TMP710[28].kind = 1;
TMP710[28].offset = offsetof(tpixelformat215045, Alpha);
TMP710[28].typ = (&NTI2805);
TMP710[28].name = "alpha";
TMP710[3].len = 17; TMP710[3].kind = 2; TMP710[3].sons = &TMP725[0];
NTI215045.node = &TMP710[3];
NTI215043.size = sizeof(tpixelformat215045*);
NTI215043.kind = 21;
NTI215043.base = (&NTI215045);
NTI215043.flags = 3;
TMP710[2].kind = 1;
TMP710[2].offset = offsetof(tsurface215055, Format);
TMP710[2].typ = (&NTI215043);
TMP710[2].name = "format";
TMP724[2] = &TMP710[29];
TMP710[29].kind = 1;
TMP710[29].offset = offsetof(tsurface215055, W);
TMP710[29].typ = (&NTI5211);
TMP710[29].name = "w";
TMP724[3] = &TMP710[30];
TMP710[30].kind = 1;
TMP710[30].offset = offsetof(tsurface215055, H);
TMP710[30].typ = (&NTI5211);
TMP710[30].name = "h";
TMP724[4] = &TMP710[31];
TMP710[31].kind = 1;
TMP710[31].offset = offsetof(tsurface215055, Pitch);
TMP710[31].typ = (&NTI130);
TMP710[31].name = "pitch";
TMP724[5] = &TMP710[32];
TMP710[32].kind = 1;
TMP710[32].offset = offsetof(tsurface215055, Pixels);
TMP710[32].typ = (&NTI165);
TMP710[32].name = "pixels";
TMP724[6] = &TMP710[33];
TMP710[33].kind = 1;
TMP710[33].offset = offsetof(tsurface215055, Offset);
TMP710[33].typ = (&NTI5211);
TMP710[33].name = "offset";
TMP724[7] = &TMP710[34];
TMP710[34].kind = 1;
TMP710[34].offset = offsetof(tsurface215055, Hwdata);
TMP710[34].typ = (&NTI165);
TMP710[34].name = "hwdata";
TMP724[8] = &TMP710[35];
NTI215027.size = sizeof(trect215027);
NTI215027.kind = 18;
NTI215027.base = 0;
NTI215027.flags = 3;
TMP728[0] = &TMP710[37];
TMP710[37].kind = 1;
TMP710[37].offset = offsetof(trect215027, X);
TMP710[37].typ = (&NTI120);
TMP710[37].name = "x";
TMP728[1] = &TMP710[38];
TMP710[38].kind = 1;
TMP710[38].offset = offsetof(trect215027, Y);
TMP710[38].typ = (&NTI120);
TMP710[38].name = "y";
TMP728[2] = &TMP710[39];
TMP710[39].kind = 1;
TMP710[39].offset = offsetof(trect215027, W);
TMP710[39].typ = (&NTI130);
TMP710[39].name = "w";
TMP728[3] = &TMP710[40];
TMP710[40].kind = 1;
TMP710[40].offset = offsetof(trect215027, H);
TMP710[40].typ = (&NTI130);
TMP710[40].name = "h";
TMP710[36].len = 4; TMP710[36].kind = 2; TMP710[36].sons = &TMP728[0];
NTI215027.node = &TMP710[36];
TMP710[35].kind = 1;
TMP710[35].offset = offsetof(tsurface215055, Cliprect);
TMP710[35].typ = (&NTI215027);
TMP710[35].name = "clip_rect";
TMP724[9] = &TMP710[41];
TMP710[41].kind = 1;
TMP710[41].offset = offsetof(tsurface215055, Unused1);
TMP710[41].typ = (&NTI122);
TMP710[41].name = "unused1";
TMP724[10] = &TMP710[42];
TMP710[42].kind = 1;
TMP710[42].offset = offsetof(tsurface215055, Locked);
TMP710[42].typ = (&NTI122);
TMP710[42].name = "locked";
TMP724[11] = &TMP710[43];
TMP710[43].kind = 1;
TMP710[43].offset = offsetof(tsurface215055, Blitmap);
TMP710[43].typ = (&NTI165);
TMP710[43].name = "Blitmap";
TMP724[12] = &TMP710[44];
TMP710[44].kind = 1;
TMP710[44].offset = offsetof(tsurface215055, Formatversion);
TMP710[44].typ = (&NTI5211);
TMP710[44].name = "format_version";
TMP724[13] = &TMP710[45];
TMP710[45].kind = 1;
TMP710[45].offset = offsetof(tsurface215055, Refcount);
TMP710[45].typ = (&NTI5211);
TMP710[45].name = "refcount";
TMP710[0].len = 14; TMP710[0].kind = 2; TMP710[0].sons = &TMP724[0];
NTI215055.node = &TMP710[0];
NTI215051.size = sizeof(tsurface215055*);
NTI215051.kind = 21;
NTI215051.base = (&NTI215055);
NTI215051.flags = 3;
if (!((TMP719 = nimLoadLibrary((NimStringDesc*) &TMP720))
)) nimLoadLibraryError((NimStringDesc*) &TMP721);
	Dl_219234 = (TY219235) nimGetProcAddr(TMP719, "SDL_MapRGBA");
	Dl_218410 = (TY218411) nimGetProcAddr(TMP719, "SDL_GetError");
	Dl_219312 = (TY219313) nimGetProcAddr(TMP719, "SDL_FreeSurface");
	Dl_219285 = (TY219286) nimGetProcAddr(TMP719, "SDL_CreateRGBSurface");
	Dl_219149 = (TY219150) nimGetProcAddr(TMP719, "SDL_SetVideoMode");
	Dl_219349 = (TY219350) nimGetProcAddr(TMP719, "SDL_SaveBMP_RW");
	Dl_218606 = (TY218607) nimGetProcAddr(TMP719, "SDL_RWFromFile");
	Dl_219411 = (TY219412) nimGetProcAddr(TMP719, "SDL_UpperBlit");
	Dl_219429 = (TY219430) nimGetProcAddr(TMP719, "SDL_FillRect");
	Dl_218225 = (TY218226) nimGetProcAddr(TMP719, "SDL_Init");
}

